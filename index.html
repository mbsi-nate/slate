
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>API Reference</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .cd {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .nl {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="javascripts/all.js"></script>
  </head>

  <body class="index" data-languages="[&quot;shell&quot;,&quot;json&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" alt="Navbar" />
      </span>
    </a>
    <div class="toc-wrapper">
      <img src="images/logo.png" class="logo" alt="Logo" />
        <div class="lang-selector">
              <a href="#" data-language-name="shell">shell</a>
              <a href="#" data-language-name="json">json</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <ul id="toc" class="toc-list-h1">
          <li>
            <a href="#introduction" class="toc-h1 toc-link" data-title="Introduction">Introduction</a>
          </li>
          <li>
            <a href="#versioning" class="toc-h1 toc-link" data-title="Versioning">Versioning</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#specifying-version" class="toc-h2 toc-link" data-title="Specifying version">Specifying version</a>
                  </li>
                  <li>
                    <a href="#unspecified-version" class="toc-h2 toc-link" data-title="Unspecified version">Unspecified version</a>
                  </li>
                  <li>
                    <a href="#hotfixes" class="toc-h2 toc-link" data-title="Hotfixes">Hotfixes</a>
                  </li>
                  <li>
                    <a href="#prior-releases" class="toc-h2 toc-link" data-title="Prior releases">Prior releases</a>
                  </li>
                  <li>
                    <a href="#open-closed-model" class="toc-h2 toc-link" data-title="Open/closed model">Open/closed model</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#authentication" class="toc-h1 toc-link" data-title="Authentication">Authentication</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#api-keys" class="toc-h2 toc-link" data-title="API Keys">API Keys</a>
                  </li>
                  <li>
                    <a href="#authentication-tokens" class="toc-h2 toc-link" data-title="Authentication Tokens">Authentication Tokens</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#protocols" class="toc-h1 toc-link" data-title="Protocols">Protocols</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#required-headers" class="toc-h2 toc-link" data-title="Required headers">Required headers</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#environments" class="toc-h1 toc-link" data-title="Environments">Environments</a>
          </li>
          <li>
            <a href="#response-codes" class="toc-h1 toc-link" data-title="Response Codes">Response Codes</a>
          </li>
          <li>
            <a href="#resources" class="toc-h1 toc-link" data-title="Resources">Resources</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#assignments" class="toc-h2 toc-link" data-title="Assignments">Assignments</a>
                  </li>
                  <li>
                    <a href="#contacts" class="toc-h2 toc-link" data-title="Contacts">Contacts</a>
                  </li>
                  <li>
                    <a href="#entities" class="toc-h2 toc-link" data-title="Entities">Entities</a>
                  </li>
                  <li>
                    <a href="#orders" class="toc-h2 toc-link" data-title="Orders">Orders</a>
                  </li>
                  <li>
                    <a href="#phones" class="toc-h2 toc-link" data-title="Phones">Phones</a>
                  </li>
                  <li>
                    <a href="#updates" class="toc-h2 toc-link" data-title="Updates">Updates</a>
                  </li>
                  <li>
                    <a href="#users" class="toc-h2 toc-link" data-title="Users">Users</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#workflows" class="toc-h1 toc-link" data-title="Workflows">Workflows</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#assignment-create" class="toc-h2 toc-link" data-title="Assignment: Create">Assignment: Create</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#versions" class="toc-h1 toc-link" data-title="Versions">Versions</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#v20191001" class="toc-h2 toc-link" data-title="v20191001">v20191001</a>
                  </li>
              </ul>
          </li>
      </ul>
        <ul class="toc-footer">
            <li><a href='#'>Contact us for an API Key</a></li>
            <li><a href='https://github.com/lord/slate'>Documentation Powered by Slate</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='introduction'>Introduction</h1>
<p>Welcome to the MBSi API.</p>
<h1 id='versioning'>Versioning</h1>
<p>When backwards-incompatible changes or new features are added to the API, we release new, dated versions in YYYYmmdd format. The current version is <strong>v20191001</strong>. </p>

<p>The version of the API that fulfilled your request will be included in the response headers as <strong>x-api-version</strong>.</p>
<h2 id='specifying-version'>Specifying version</h2>
<p>To access a specific version of the API, specify the version number in the URL.  Eg: <em>/api/v20191001/hello_world</em></p>
<pre class="highlight shell tab-shell"><code>curl GET <span class="s2">"http://stage.re-pros.io/api/v20191001/hello_world"</span>
</code></pre><h2 id='unspecified-version'>Unspecified version</h2>
<p>When a version is not specified in the request URL the latest release of the API will be used by default.  Eg:  <em>/api/hello_world</em></p>
<h2 id='hotfixes'>Hotfixes</h2>
<p>When hotfixes are released for a given version, an additional incrementing will be appended to the API Version.  Eg:  v20191001-1</p>
<h2 id='prior-releases'>Prior releases</h2>
<p>Prior versions of the API will be supported for <em>3 weeks</em>, unless a security-related or system-impacting issue is identified. Depending on the severity of such an issue we will take action to remedy via one or more of the following methods.</p>

<ul>
<li>Back-porting the fix into a previous version</li>
<li>Restricting access or altering the endpoint identified in the issue.</li>
<li>Accelerating the sunset timeline of the previous version</li>
</ul>
<h2 id='open-closed-model'>Open/closed model</h2>
<p>We follow the open/closed principle with all request/response data models in the the API.  Models will be open for extension but closed for modification.</p>

<p>This means a model may be revised within a given version to include additional fields but existing fields will not be altered or removed without a new API version being created.</p>

<p>When writing clients to communicate with the API you will need to handle potential additional fields that may not have been specified during initial development in responses to ensure they do not break your client.</p>

<p>Conversely, the API will ignore any extra request body properties that your client sends.</p>
<h1 id='authentication'>Authentication</h1><h2 id='api-keys'>API Keys</h2>
<p>All requests require an <strong>x-api-key</strong> header in addition to a valid <strong>Authentication</strong> header.</p>
<h3 id='obtaining-an-api-key'>Obtaining an API Key</h3>
<p>API Keys must be obtained from your account rep.  Contact support at <strong>1-800-some-number</strong> or <strong>someemail@mbsicorp.com</strong> for assistance.</p>
<h2 id='authentication-tokens'>Authentication Tokens</h2>
<p>All requests require an <strong>Authentication</strong> header in addition to the aforementioned <strong>x-api-key</strong> token.  </p>
<h3 id='obtaining-an-authentication-token'>Obtaining an Authentication Token</h3>
<p>Invoking the authentication endpoints with a valid API Key and valid credentials will issue a bearer token that can be used to make further requests.  See endpoint documentation for details.</p>
<pre class="highlight shell tab-shell"><code>curl -X POST <span class="s2">"https://test.re-pros.io/api/auth"</span> -H <span class="s2">"x-api-key: yourapikey"</span> -H <span class="s2">"accept: application/json"</span> -D <span class="s2">"{ </span><span class="se">\"</span><span class="s2">user</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">username</span><span class="se">\"</span><span class="s2">, </span><span class="se">\"</span><span class="s2">pass</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">password</span><span class="se">\"</span><span class="s2">}"</span>
</code></pre><h1 id='protocols'>Protocols</h1>
<p>All API endpoints are secured via HTTPS and TLS 1.2</p>
<h2 id='required-headers'>Required headers</h2>
<p>All requests must specify an <strong>accept</strong> header (accept: application/json), a <strong>x-api-key</strong> header, and an <strong>authorization</strong> header.</p>
<pre class="highlight shell tab-shell"><code>curl -X POST <span class="s2">"https://test.re-pros.io/api/auth"</span> -H <span class="s2">"x-api-key: yourapikey"</span> -H <span class="s2">"authorization: Bearer yourauthtokenhere"</span> -H <span class="s2">"accept: application/json"</span> -D <span class="s2">"{ </span><span class="se">\"</span><span class="s2">user</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">username</span><span class="se">\"</span><span class="s2">, </span><span class="se">\"</span><span class="s2">pass</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">password</span><span class="se">\"</span><span class="s2">}"</span>
</code></pre><h1 id='environments'>Environments</h1>
<p>All changes to the API flow through these three stages.</p>

<table><thead>
<tr>
<th>Environment</th>
<th>URL</th>
</tr>
</thead><tbody>
<tr>
<td>test</td>
<td>https://test.re-pros.io/api</td>
</tr>
<tr>
<td>stage</td>
<td>https://stage.re-pros.io/api</td>
</tr>
<tr>
<td>production</td>
<td>https://production.re-pros.io/api</td>
</tr>
</tbody></table>

<aside class="notice">
Development for new users should begin at the *stage* environment unless circumstances dictate otherwise.
</aside>
 
<h1 id='response-codes'>Response Codes</h1>
<blockquote>
<p>Payload returned for failed requests</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Code further representing the state"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"messages"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Message type ID"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"One or more details about what happened"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<table><thead>
<tr>
<th>Code</th>
<th>Summary</th>
<th>Details</th>
</tr>
</thead><tbody>
<tr>
<td>200</td>
<td>OK</td>
<td>Worked as expected</td>
</tr>
<tr>
<td>201</td>
<td>OK</td>
<td>Resource created</td>
</tr>
<tr>
<td>204</td>
<td>OK</td>
<td>Resource successfully deleted</td>
</tr>
<tr>
<td>304</td>
<td>Not Modified</td>
<td>Client can use cached data</td>
</tr>
<tr>
<td>400</td>
<td>Bad Request</td>
<td>Something was wrong with the request, details will appear in the response payload</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized</td>
<td>Something is wrong with the authentication token on the request</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden</td>
<td>Request was received but refused due to a permissions issue.</td>
</tr>
<tr>
<td>404</td>
<td>Not found</td>
<td>No resource matched the requested URI</td>
</tr>
<tr>
<td>422</td>
<td>Unprocessable</td>
<td>Returned if the server could not process the request</td>
</tr>
<tr>
<td>500</td>
<td>Internal Server Error</td>
<td>An internal error occurred that has been logged for investigation</td>
</tr>
</tbody></table>

<aside class="notice">
Code 422 could be returned if an expected field was missing.
</aside>
<h1 id='resources'>Resources</h1>
<p>Every entity available in the API is described as a resource.</p>

<p>Each resource is operated upon individually or as a collection.</p>

<aside class="notice">
Some resources and collections of resources may not support all operations (create, read, update, delete).
</aside>

<aside class="notice">
Some operations require an individual ID, denoted like api/order/{ID}
</aside>

<p>Resources are used in workflows.<br>
Workflows are leveraged to support all business operations.</p>
<h2 id='assignments'>Assignments</h2>
<p>An assignment represents an active request for work in the system.</p>
<h3 id='operations'>Operations</h3>
<p>The following operations are allowed on the <strong>assignments</strong> resource.</p>

<table><thead>
<tr>
<th>Operation</th>
<th>HTTP method</th>
<th>Endpoint</th>
<th>Starting with</th>
</tr>
</thead><tbody>
<tr>
<td>Create</td>
<td>POST</td>
<td>api/assignments</td>
<td>v20191001</td>
</tr>
<tr>
<td>Retrieve all</td>
<td>GET</td>
<td>api/assignments</td>
<td>v20191001</td>
</tr>
<tr>
<td>Retrieve new</td>
<td>GET</td>
<td>api/assignments/new</td>
<td>v20191001</td>
</tr>
<tr>
<td>Retrieve individual</td>
<td>GET</td>
<td>api/assignment/{ID}</td>
<td>v20191001</td>
</tr>
</tbody></table>

<aside class="notice">
Some operations require an individual ID
</aside>
<h3 id='workflows'>Workflows</h3>
<p>The following workflows are available:</p>

<ul>
<li>Create an assignment</li>
<li>Accept an assignment</li>
<li>Reject an assignment</li>
<li>Hold an assignment</li>
<li>Close an assignment</li>
<li>Request an update on an assignment</li>
<li>Reassign an assignment</li>
<li>Forward an assignment</li>
<li>Update an assignment</li>
</ul>
<h2 id='contacts'>Contacts</h2><h3 id='operations'>Operations</h3><h3 id='workflows'>Workflows</h3><h3 id='contact-types'>Contact Types</h3><h2 id='entities'>Entities</h2>
<p>Business entities represents a recovery service provider or a client or a police department.</p>
<h3 id='operations'>Operations</h3>
<table><thead>
<tr>
<th>Operation</th>
<th>HTTP method</th>
<th>Endpoint</th>
<th>Starting with</th>
</tr>
</thead><tbody>
<tr>
<td>foo</td>
<td>GET</td>
<td>/api/foo</td>
<td>20191001</td>
</tr>
</tbody></table>
<h3 id='workflows'>Workflows</h3><h2 id='orders'>Orders</h2>
<p>An order represents an inactive or unassigned request for work in the system.</p>
<h3 id='operations'>Operations</h3>
<table><thead>
<tr>
<th>Operation</th>
<th>HTTP method</th>
<th>Endpoint</th>
<th>Starting with</th>
</tr>
</thead><tbody>
<tr>
<td>Create</td>
<td>POST</td>
<td>api/orders</td>
<td>v20191001</td>
</tr>
<tr>
<td>Retrieve all</td>
<td>GET</td>
<td>api/orders</td>
<td>v20191001</td>
</tr>
<tr>
<td>Retrieve individual</td>
<td>GET</td>
<td>api/order/{ID}</td>
<td>v20191001</td>
</tr>
<tr>
<td>Delete</td>
<td>DELETE</td>
<td>api/order/{ID}</td>
<td>v20191001</td>
</tr>
<tr>
<td>Edit</td>
<td>PUT</td>
<td>api/order/{ID}</td>
<td>v20191001</td>
</tr>
</tbody></table>

<aside class="notice">
Some operations require an individual ID
</aside>
<h3 id='workflows'>Workflows</h3>
<ul>
<li>Assign order</li>
<li>Hold order</li>
<li>Delete order</li>
</ul>
<h3 id='order-types'>Order Types</h3><h2 id='phones'>Phones</h2><h3 id='operations'>Operations</h3>
<table><thead>
<tr>
<th>Operation</th>
<th>HTTP method</th>
<th>Endpoint</th>
<th>Starting with</th>
</tr>
</thead><tbody>
<tr>
<td>foo</td>
<td>GET</td>
<td>/api/foo</td>
<td>20191001</td>
</tr>
</tbody></table>
<h3 id='workflows'>Workflows</h3><h3 id='phone-types'>Phone Types</h3><h2 id='updates'>Updates</h2><h3 id='operations'>Operations</h3><h3 id='workflows'>Workflows</h3><h3 id='update-types'>Update Types</h3><h2 id='users'>Users</h2><h3 id='operations'>Operations</h3>
<table><thead>
<tr>
<th>Operation</th>
<th>HTTP method</th>
<th>Endpoint</th>
<th>Starting with</th>
</tr>
</thead><tbody>
<tr>
<td>foo</td>
<td>GET</td>
<td>/api/foo</td>
<td>20191001</td>
</tr>
</tbody></table>
<h3 id='workflows'>Workflows</h3><h3 id='user-types'>User Types</h3><h1 id='workflows'>Workflows</h1>
<p>Business operations are supported by utilizing workflows.</p>

<aside class="notice">
Each workflow depends on one or more resources to operate.
</aside>

<aside class="notice">
Resources that are depedent on each other will exist with temporary IDs until a workflow connects them.
</aside>
<h2 id='assignment-create'>Assignment: Create</h2>
<p>To create an assignment</p>
<h3 id='step-1'>Step 1</h3>
<p>Create an asset or retrieve an existing one.</p>

<table><thead>
<tr>
<th>Operation</th>
<th>HTTP method</th>
<th>Endpoint</th>
<th>Starting with</th>
</tr>
</thead><tbody>
<tr>
<td>New Asset</td>
<td>POST</td>
<td>/api/20191001/assets</td>
<td>20191001</td>
</tr>
</tbody></table>

<blockquote>
<p>Fill in the details about the asset</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"vin"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1G1YY12S245107908"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"make"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Chevrolet"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"model"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Corvette"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"year"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2004"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"mileage"</span><span class="p">:</span><span class="w"> </span><span class="s2">"90000"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>Response</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"13211"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><h1 id='versions'>Versions</h1><h2 id='v20191001'>v20191001</h2>
<p>Initial version.</p>
<h3 id='changelog'>Changelog</h3>
<p>Initial version.</p>
<h4 id='upgrade-guide'>Upgrade guide</h4>
<p>N/A</p>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="shell">shell</a>
                <a href="#" data-language-name="json">json</a>
          </div>
      </div>
    </div>
  </body>
</html>
